<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gladtools Mock Preview</title>
  <style>
    :root {
      --bg: #101217;
      --panel: #191d26;
      --panel-edge: #3f4759;
      --text: #e8ecf4;
      --muted: #aeb7c8;
      --accent: #33ff99;
      --button: #2a3140;
      --button-hover: #364159;
      --danger: #7a2f3f;
      --danger-hover: #944154;
      --checkbox: #11141b;
      --checkbox-edge: #4d5a74;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background:
        radial-gradient(1000px 540px at 15% -20%, #2a3145 0%, transparent 60%),
        radial-gradient(900px 500px at 110% 120%, #293420 0%, transparent 55%),
        var(--bg);
      color: var(--text);
      font: 14px/1.3 "Trebuchet MS", "Segoe UI", sans-serif;
      padding: 20px;
    }

    .window {
      width: min(980px, 96vw);
      background: linear-gradient(180deg, #1f2430 0%, var(--panel) 100%);
      border: 1px solid var(--panel-edge);
      border-radius: 8px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.55), inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      overflow: hidden;
    }

    .titlebar {
      padding: 14px 16px 8px;
      border-bottom: 1px solid #2f3748;
      background: linear-gradient(180deg, rgba(51, 255, 153, 0.08), transparent);
    }

    h1 {
      margin: 0;
      font-size: 22px;
      letter-spacing: 0.2px;
    }

    .subtitle {
      margin: 6px 0 0;
      color: var(--muted);
    }

    .content {
      padding: 14px 16px 16px;
      display: grid;
      gap: 14px;
    }

    .panel {
      border: 1px solid #2f3748;
      border-radius: 7px;
      background: rgba(16, 20, 27, 0.65);
      padding: 12px;
    }

    .panel h2 {
      margin: 0;
      font-size: 17px;
    }

    .panel .hint {
      margin: 6px 0 10px;
      color: var(--muted);
      font-size: 13px;
    }

    .preset-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    select,
    button {
      border: 1px solid #43506a;
      background: var(--button);
      color: var(--text);
      border-radius: 6px;
      padding: 8px 10px;
      font-size: 14px;
    }

    select {
      min-width: 180px;
    }

    button {
      cursor: pointer;
    }

    button:hover {
      background: var(--button-hover);
    }

    .danger {
      background: var(--danger);
      border-color: #985167;
    }

    .danger:hover {
      background: var(--danger-hover);
    }

    .groups {
      display: grid;
      grid-template-columns: repeat(2, minmax(260px, 1fr));
      gap: 10px;
    }

    .group {
      border: 1px solid #2f3748;
      border-radius: 6px;
      padding: 10px;
      background: rgba(22, 28, 38, 0.55);
    }

    .group h3 {
      margin: 0 0 8px;
      font-size: 15px;
      color: #d7deea;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0;
      color: #dae1ef;
    }

    input[type="checkbox"] {
      appearance: none;
      width: 16px;
      height: 16px;
      border: 1px solid var(--checkbox-edge);
      border-radius: 3px;
      background: var(--checkbox);
      display: inline-grid;
      place-content: center;
      margin: 0;
      cursor: pointer;
    }

    input[type="checkbox"]::before {
      content: "";
      width: 10px;
      height: 10px;
      transform: scale(0);
      transition: transform 120ms ease-out;
      box-shadow: inset 1em 1em var(--accent);
      border-radius: 1px;
    }

    input[type="checkbox"]:checked::before {
      transform: scale(1);
    }

    .status {
      margin-top: 2px;
      border-top: 1px solid #2f3748;
      padding-top: 10px;
      color: #dce4f4;
    }

    .status b {
      color: var(--accent);
      font-weight: 700;
    }

    .meta {
      margin-top: 4px;
      color: var(--muted);
      font-size: 12px;
    }

    @media (max-width: 760px) {
      .groups {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <main class="window" id="app">
    <header class="titlebar">
      <h1>Gladtools Settings (Mock Preview)</h1>
      <p class="subtitle">Standalone browser preview of your WoW addon window. Layout and behavior are approximate.</p>
    </header>

    <section class="content">
      <div class="panel">
        <h2>Presets</h2>
        <p class="hint">Selecting a preset applies it immediately. You can still edit any setting afterwards.</p>
        <div class="preset-row">
          <label for="presetSelect">Preset:</label>
          <select id="presetSelect">
            <option value="healer">Healer</option>
            <option value="dps">DPS</option>
          </select>
          <button id="applyBtn" type="button">Apply Selected</button>
          <button id="resetBtn" class="danger" type="button">Reset To Preset Defaults</button>
        </div>
      </div>

      <div class="panel">
        <h2>Individual Settings</h2>
        <div class="groups">
          <section class="group">
            <h3>Pointers</h3>
            <label class="row"><input id="pointersEnabled" type="checkbox" /> Enable pointers</label>
            <label class="row"><input id="pointerAllFriendly" type="checkbox" /> Target all friendly units</label>
            <label class="row"><input id="pointerGroupHealers" type="checkbox" /> Target only HEALER role in group</label>
          </section>

          <section class="group">
            <h3>Unit Frames (Friendly / Near)</h3>
            <label class="row"><input id="friendlyFancy" type="checkbox" /> Friendly: fancy style</label>
            <label class="row"><input id="friendlyCooldowns" type="checkbox" /> Friendly: show cooldowns</label>
            <label class="row"><input id="nearEnabled" type="checkbox" /> Near: enabled</label>
            <label class="row"><input id="nearCooldowns" type="checkbox" /> Near: show cooldowns</label>
          </section>

          <section class="group">
            <h3>Unit Frames (Enemy)</h3>
            <label class="row"><input id="enemyFancy" type="checkbox" /> Enemy: fancy style</label>
            <label class="row"><input id="enemyCooldowns" type="checkbox" /> Enemy: show cooldowns</label>
          </section>

          <section class="group">
            <h3>Cooldown Displays</h3>
            <label class="row"><input id="cooldownsEnemy" type="checkbox" /> Show enemy cooldowns</label>
            <label class="row"><input id="cooldownsFriendly" type="checkbox" /> Show friendly cooldowns</label>
            <label class="row"><input id="cooldownsTracking" type="checkbox" /> Enable cooldown tracking</label>
          </section>

          <section class="group">
            <h3>Cast Bars</h3>
            <label class="row"><input id="castBarsEnabled" type="checkbox" /> Enable cast bars</label>
            <label class="row"><input id="castBarsPlayer" type="checkbox" /> Show player cast bar</label>
            <label class="row"><input id="castBarsTarget" type="checkbox" /> Show target cast bar</label>
            <label class="row"><input id="castBarsCooldownTracking" type="checkbox" /> Cast bar cooldown tracking</label>
          </section>
        </div>

        <div class="status" id="statusLine"><b>Status:</b> Ready</div>
        <div class="meta" id="metaLine">selectedPreset=healer</div>
      </div>
    </section>
  </main>

  <script>
    const DEFAULTS = {
      selectedPreset: "healer",
      settings: {
        pointers: {
          enabled: true,
          targetMode: "all_friendly",
        },
        unitFrames: {
          friendly: {
            enabled: true,
            style: "fancy",
            showCooldowns: true,
          },
          enemy: {
            enabled: true,
            style: "fancy",
            showCooldowns: true,
          },
          near: {
            enabled: true,
            style: "compact",
            showCooldowns: true,
          },
        },
        cooldowns: {
          showEnemy: true,
          showFriendly: true,
          trackingEnabled: false,
        },
        castBars: {
          enabled: true,
          player: true,
          target: true,
          cooldownTracking: false,
        },
      },
    };

    const PRESETS = {
      healer: {
        label: "Healer",
        settings: {
          pointers: {
            enabled: true,
            targetMode: "all_friendly",
          },
          unitFrames: {
            friendly: {
              enabled: true,
              style: "fancy",
              showCooldowns: true,
            },
            enemy: {
              enabled: true,
              style: "fancy",
              showCooldowns: true,
            },
            near: {
              enabled: true,
              style: "compact",
              showCooldowns: true,
            },
          },
          cooldowns: {
            showEnemy: true,
            showFriendly: true,
            trackingEnabled: false,
          },
          castBars: {
            enabled: true,
            player: true,
            target: true,
            cooldownTracking: false,
          },
        },
      },
      dps: {
        label: "DPS",
        settings: {
          pointers: {
            enabled: true,
            targetMode: "group_healers",
          },
          unitFrames: {
            friendly: {
              enabled: true,
              style: "fancy",
              showCooldowns: true,
            },
            enemy: {
              enabled: true,
              style: "fancy",
              showCooldowns: true,
            },
            near: {
              enabled: false,
              style: "compact",
              showCooldowns: false,
            },
          },
          cooldowns: {
            showEnemy: true,
            showFriendly: true,
            trackingEnabled: true,
          },
          castBars: {
            enabled: true,
            player: true,
            target: true,
            cooldownTracking: true,
          },
        },
      },
    };

    function deepCopy(value) {
      if (value === null || typeof value !== "object") return value;
      if (Array.isArray(value)) return value.map(deepCopy);
      const out = {};
      for (const [k, v] of Object.entries(value)) out[k] = deepCopy(v);
      return out;
    }

    function mergeOverwrite(target, source) {
      for (const [k, v] of Object.entries(source)) {
        if (v && typeof v === "object" && !Array.isArray(v)) {
          if (!target[k] || typeof target[k] !== "object") target[k] = {};
          mergeOverwrite(target[k], v);
        } else {
          target[k] = v;
        }
      }
    }

    const state = deepCopy(DEFAULTS);

    const els = {
      presetSelect: document.getElementById("presetSelect"),
      applyBtn: document.getElementById("applyBtn"),
      resetBtn: document.getElementById("resetBtn"),
      statusLine: document.getElementById("statusLine"),
      metaLine: document.getElementById("metaLine"),
      pointersEnabled: document.getElementById("pointersEnabled"),
      pointerAllFriendly: document.getElementById("pointerAllFriendly"),
      pointerGroupHealers: document.getElementById("pointerGroupHealers"),
      friendlyFancy: document.getElementById("friendlyFancy"),
      friendlyCooldowns: document.getElementById("friendlyCooldowns"),
      nearEnabled: document.getElementById("nearEnabled"),
      nearCooldowns: document.getElementById("nearCooldowns"),
      enemyFancy: document.getElementById("enemyFancy"),
      enemyCooldowns: document.getElementById("enemyCooldowns"),
      cooldownsEnemy: document.getElementById("cooldownsEnemy"),
      cooldownsFriendly: document.getElementById("cooldownsFriendly"),
      cooldownsTracking: document.getElementById("cooldownsTracking"),
      castBarsEnabled: document.getElementById("castBarsEnabled"),
      castBarsPlayer: document.getElementById("castBarsPlayer"),
      castBarsTarget: document.getElementById("castBarsTarget"),
      castBarsCooldownTracking: document.getElementById("castBarsCooldownTracking"),
    };

    function setStatus(text) {
      els.statusLine.innerHTML = `<b>Status:</b> ${text}`;
      els.metaLine.textContent = `selectedPreset=${state.selectedPreset}`;
    }

    function render() {
      els.presetSelect.value = state.selectedPreset;

      els.pointersEnabled.checked = !!state.settings.pointers.enabled;
      els.pointerAllFriendly.checked = state.settings.pointers.targetMode === "all_friendly";
      els.pointerGroupHealers.checked = state.settings.pointers.targetMode === "group_healers";

      els.friendlyFancy.checked = state.settings.unitFrames.friendly.style === "fancy";
      els.friendlyCooldowns.checked = !!state.settings.unitFrames.friendly.showCooldowns;
      els.nearEnabled.checked = !!state.settings.unitFrames.near.enabled;
      els.nearCooldowns.checked = !!state.settings.unitFrames.near.showCooldowns;

      els.enemyFancy.checked = state.settings.unitFrames.enemy.style === "fancy";
      els.enemyCooldowns.checked = !!state.settings.unitFrames.enemy.showCooldowns;

      els.cooldownsEnemy.checked = !!state.settings.cooldowns.showEnemy;
      els.cooldownsFriendly.checked = !!state.settings.cooldowns.showFriendly;
      els.cooldownsTracking.checked = !!state.settings.cooldowns.trackingEnabled;

      els.castBarsEnabled.checked = !!state.settings.castBars.enabled;
      els.castBarsPlayer.checked = !!state.settings.castBars.player;
      els.castBarsTarget.checked = !!state.settings.castBars.target;
      els.castBarsCooldownTracking.checked = !!state.settings.castBars.cooldownTracking;
    }

    function applyPreset(presetKey) {
      const preset = PRESETS[presetKey];
      if (!preset) return;
      mergeOverwrite(state.settings, deepCopy(preset.settings));
      state.selectedPreset = presetKey;
      render();
      setStatus(`Applied preset: ${preset.label}`);
    }

    function resetToPreset() {
      const preset = PRESETS[state.selectedPreset];
      if (!preset) return;
      mergeOverwrite(state.settings, deepCopy(preset.settings));
      render();
      setStatus(`Reset to ${preset.label} defaults`);
    }

    function wire() {
      els.presetSelect.addEventListener("change", (e) => {
        applyPreset(e.target.value);
      });

      els.applyBtn.addEventListener("click", () => {
        applyPreset(els.presetSelect.value);
      });

      els.resetBtn.addEventListener("click", () => {
        resetToPreset();
      });

      els.pointersEnabled.addEventListener("change", () => {
        state.settings.pointers.enabled = els.pointersEnabled.checked;
        setStatus("Edited pointers.enabled");
      });

      els.pointerAllFriendly.addEventListener("change", () => {
        if (!els.pointerAllFriendly.checked) {
          els.pointerAllFriendly.checked = true;
          return;
        }
        state.settings.pointers.targetMode = "all_friendly";
        render();
        setStatus("Edited pointers.targetMode");
      });

      els.pointerGroupHealers.addEventListener("change", () => {
        if (!els.pointerGroupHealers.checked) {
          els.pointerGroupHealers.checked = true;
          return;
        }
        state.settings.pointers.targetMode = "group_healers";
        render();
        setStatus("Edited pointers.targetMode");
      });

      els.friendlyFancy.addEventListener("change", () => {
        state.settings.unitFrames.friendly.style = els.friendlyFancy.checked ? "fancy" : "simple";
        setStatus("Edited unitFrames.friendly.style");
      });
      els.friendlyCooldowns.addEventListener("change", () => {
        state.settings.unitFrames.friendly.showCooldowns = els.friendlyCooldowns.checked;
        setStatus("Edited unitFrames.friendly.showCooldowns");
      });
      els.nearEnabled.addEventListener("change", () => {
        state.settings.unitFrames.near.enabled = els.nearEnabled.checked;
        setStatus("Edited unitFrames.near.enabled");
      });
      els.nearCooldowns.addEventListener("change", () => {
        state.settings.unitFrames.near.showCooldowns = els.nearCooldowns.checked;
        setStatus("Edited unitFrames.near.showCooldowns");
      });

      els.enemyFancy.addEventListener("change", () => {
        state.settings.unitFrames.enemy.style = els.enemyFancy.checked ? "fancy" : "simple";
        setStatus("Edited unitFrames.enemy.style");
      });
      els.enemyCooldowns.addEventListener("change", () => {
        state.settings.unitFrames.enemy.showCooldowns = els.enemyCooldowns.checked;
        setStatus("Edited unitFrames.enemy.showCooldowns");
      });

      els.cooldownsEnemy.addEventListener("change", () => {
        state.settings.cooldowns.showEnemy = els.cooldownsEnemy.checked;
        setStatus("Edited cooldowns.showEnemy");
      });
      els.cooldownsFriendly.addEventListener("change", () => {
        state.settings.cooldowns.showFriendly = els.cooldownsFriendly.checked;
        setStatus("Edited cooldowns.showFriendly");
      });
      els.cooldownsTracking.addEventListener("change", () => {
        state.settings.cooldowns.trackingEnabled = els.cooldownsTracking.checked;
        setStatus("Edited cooldowns.trackingEnabled");
      });

      els.castBarsEnabled.addEventListener("change", () => {
        state.settings.castBars.enabled = els.castBarsEnabled.checked;
        setStatus("Edited castBars.enabled");
      });
      els.castBarsPlayer.addEventListener("change", () => {
        state.settings.castBars.player = els.castBarsPlayer.checked;
        setStatus("Edited castBars.player");
      });
      els.castBarsTarget.addEventListener("change", () => {
        state.settings.castBars.target = els.castBarsTarget.checked;
        setStatus("Edited castBars.target");
      });
      els.castBarsCooldownTracking.addEventListener("change", () => {
        state.settings.castBars.cooldownTracking = els.castBarsCooldownTracking.checked;
        setStatus("Edited castBars.cooldownTracking");
      });
    }

    wire();
    render();
    setStatus("Ready");
  </script>
</body>
</html>
